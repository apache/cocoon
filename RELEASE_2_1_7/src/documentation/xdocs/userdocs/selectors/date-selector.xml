<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 1999-2004 The Apache Software Foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.0//EN" "document-v10.dtd">

<!--
  <![CDATA[ CVS Version: $Id$ 
  ]]>
-->
<document>
  <header>
    <title>DateSelector in Cocoon</title>
    <version>0.9</version>
    <type>Technical document</type>
    <authors>
      <person name="Bernhard Huber" email="huber@apache.org"/>
    </authors>
    <abstract>This document describes the DateSelector of Cocoon.</abstract>
  </header>
  <body>
    <s1 title="DateSelector">
      <table>
        <tr>
          <td>NAME</td><td>date</td>
        </tr>
        <tr>
          <td>WHAT</td><td>The <code>DateSelector</code> component is used to 
            select appropriate sitemap processing depending on the current date, and time.
          </td>
        </tr>
        <tr>
          <td>TYPE</td><td>Selector, Sitemap Component</td>
        </tr>
        <tr>
          <td>BLOCK</td><td>Scratchpad</td>
        </tr>
        <tr>
          <td>CLASS</td><td>org.apache.cocoon.selection.DateSelector</td>
        </tr>
        <tr>
          <td>SINCE</td><td>Cocoon 2.1</td>
        </tr>
        <tr>
          <td>CACHEABLE</td><td>not applicable</td>
        </tr>
      </table>
    </s1>
    <s1 title="Description">
      <p>
        The <code>DateSelector</code> tests the current date, and time
        against the test attribute of the selectors when clause.
      </p>
    </s1>
    <s1 title="Usage">
      <p>
        The <code>DateSelector</code> allows to define date, and time specific sitemap
        processing. This way Cocoon can do date, and time specific sitemap processing.
      </p>
      <s2 title="Sitemap pipeline examples">
        <p></p>
        <source><![CDATA[
<map:select type="daytime">
  <map:when test="night">
    <!-- do something for night publishing -->
    <map:read src="resources/{2}-night.css" mime-type="text/css>
  </map:when>
  <map:when test="morning">
    <!-- do something for morning publishing -->
    <map:read src="resources/{2}-morning.css" mime-type="text/css>
  </map:when>
  ...
  <map:otherwise>
    <!-- define for completness, and if selecting fails due to errors -->
  </map:otherwise>
</map:select>
]]></source>
      </s2>
      
      <s2 title="Sitemap component configuration example">
        <p>
          The following snippet defines a DateSelector named daytime. 
          A day is partioned into four daytime areas: night, morning, afternoon, and evening.
          These daytime names are used to define daytime specific pipeline processing for each
          daytime area.
        </p>
        <source><![CDATA[
<map:selectors default="browser">
  ...
  <map:selector type="daytime" src="org.apache.cocoon.selection.DateSelector">
    <before name="night" date="06:00:00" dateformat="HH:mm:ss"/>
    <before name="morning" date="12:00:00" dateformat="HH:mm:ss"/>
    <before name="afternoon" date="18:00:00" dateformat="HH:mm:ss"/>
    <before name="evening" date="23:59:59" dateformat="HH:mm:ss"/>
  </map:selector>
...
</map:selectors>
]]></source>
      </s2>
      <s2 title="Configuration">
        <p>
          Explain the sitemap selector configuration, options when declaring date selector
        </p>
      </s2>
      <s2 title="Setup">
        <p>
          Explain the sitemap selector setup, ie options when using date selector
        </p>
      </s2>
      <s2 title="Effect on Object Model and Sitemap Parameters">
        <p>
        
        </p>
      </s2>
    </s1>
    <s1 title="Bugs/Caveats">
      <p>
        Describe limitation, bugs of DateSelector 
      </p>
    </s1>
    <s1 title="History">
      <p>
        11-28-03: initial creation
      </p>
    </s1>
    <s1 title="See also">
      <p>
        <!-- Links to related components pages. -->
        A general documentation about selectors is available at
        <link href="../concepts/matchers_selectors.html">Matchers and Selectors</link>.
      </p>
    </s1>
  </body>
</document>

