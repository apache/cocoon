<?xml version="1.0"?>

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<!-- =========================== Components ================================ -->

 <map:components>

  <map:generators default="file">
   <map:generator  name="file"        src="org.apache.cocoon.generation.FileGenerator" label="content"/>
   <map:generator  name="directory"   src="org.apache.cocoon.generation.DirectoryGenerator" label="content"/>
   <map:generator  name="serverpages" src="org.apache.cocoon.generation.ServerPagesGenerator" label="content"/>
   <map:generator  name="request"     src="org.apache.cocoon.generation.RequestGenerator"/>
   <map:generator  name="status"      src="org.apache.cocoon.generation.StatusGenerator"/>
   <map:generator  name="extractor"   src="org.apache.cocoon.generation.FragmentExtractorGenerator"/>
  </map:generators>

  <map:transformers default="xslt">
   <map:transformer     name="xslt"      src="org.apache.cocoon.transformation.TraxTransformer">
    <compile-stylesheets map:value="true"/>
    <use-store map:value="false"/>
   </map:transformer>
   <map:transformer     name="log"       src="org.apache.cocoon.transformation.LogTransformer"/>
   <map:transformer     name="sql"       src="org.apache.cocoon.transformation.SQLTransformer"/>
   <map:transformer     name="extractor" src="org.apache.cocoon.transformation.FragmentExtractorTransformer"/>
  </map:transformers>

  <map:readers default="resource">
   <map:reader name="resource"       src="org.apache.cocoon.reading.ResourceReader"/>
  </map:readers>

  <map:serializers default="html">
   <map:serializer name="links"                               src="org.apache.cocoon.serialization.LinkSerializer"/>
   <map:serializer name="xml"    mime-type="text/xml"         src="org.apache.cocoon.serialization.XMLSerializer"/>
   <map:serializer name="html"   mime-type="text/html"        src="org.apache.cocoon.serialization.HTMLSerializer"/>
   <map:serializer name="fo2pdf" mime-type="application/pdf"  src="org.apache.cocoon.serialization.FOPSerializer"/>
   <map:serializer name="vrml"   mime-type="model/vrml"       src="org.apache.cocoon.serialization.TextSerializer"/>
   <map:serializer name="wap"    mime-type="text/vnd.wap.wml" src="org.apache.cocoon.serialization.XMLSerializer">
    <doctype-public>-//WAPFORUM//DTD WML 1.1//EN</doctype-public>
    <doctype-system>http://www.wapforum.org/DTD/wml_1.1.xml</doctype-system>
   </map:serializer>
   <map:serializer name="svgxml" mime-type="image/svg-xml"    src="org.apache.cocoon.serialization.XMLSerializer">
    <doctype-public>-//W3C//DTD SVG 20000303 Stylable//EN</doctype-public>
    <doctype-system>http://www.w3.org/TR/2000/03/WD-SVG-20000303/</doctype-system>
   </map:serializer>
   <map:serializer name="svg2jpeg" mime-type="image/jpeg"     src="org.apache.cocoon.serialization.SVGSerializer">
    <parameter name="transcoder" value="org.apache.batik.transcoder.image.JPEGTranscoder"/>
    <!-- example parameter - background colour is bright green
    <parameter name="background_color" type="color" value="#00FF00"/>
    -->
   </map:serializer>
   <map:serializer name="svg2png" mime-type="image/png"       src="org.apache.cocoon.serialization.SVGSerializer">
    <parameter name="transcoder" value="org.apache.batik.transcoder.image.PNGTranscoder"/>
   </map:serializer>
  </map:serializers>

  <map:selectors default="browser">
   <map:selector name="browser" factory="org.apache.cocoon.selection.BrowserSelectorFactory">
    <!-- # NOTE: The appearance indicates the search order. This is very important since
         #       some words may be found in more than one browser description. (MSIE is
         #       presented as "Mozilla/4.0 (Compatible; MSIE 4.01; ...")
    -->
    <browser name="explorer" useragent="MSIE"/>
    <browser name="pocketexplorer" useragent="MSPIE"/>
    <browser name="handweb" useragent="HandHTTP"/>
    <browser name="avantgo" useragent="AvantGo"/>
    <browser name="imode" useragent="DoCoMo"/>
    <browser name="opera" useragent="Opera"/>
    <browser name="lynx" useragent="Lynx"/>
    <browser name="java" useragent="Java"/>
    <browser name="wap" useragent="Nokia"/>
    <browser name="wap" useragent="UP"/>
    <browser name="wap" useragent="Wapalizer"/>
    <browser name="mozilla5" useragent="Mozilla/5"/>
    <browser name="mozilla5" useragent="Netscape6/"/>
    <browser name="netscape" useragent="Mozilla"/>
   </map:selector>
   <map:selector name="coded" factory="org.apache.cocoon.selection.CodedSelectorFactory"/>
  </map:selectors>

  <map:matchers default="wildcard">
   <map:matcher name="wildcard"        factory="org.apache.cocoon.matching.WildcardURIMatcherFactory"/>
   <map:matcher name="regexp" factory="org.apache.cocoon.matching.RegexpURIMatcherFactory"/>
  </map:matchers>

  <map:actions>
   <map:action name="add-employee" src="org.apache.cocoon.acting.AddEmployeeAction">
     <use-connection>personnel</use-connection>
   </map:action>
   <map:action name="del-employee" src="org.apache.cocoon.acting.DelEmployeeAction">
     <use-connection>personnel</use-connection>
   </map:action>
   <map:action name="upd-employee" src="org.apache.cocoon.acting.UpdEmployeeAction">
     <use-connection>personnel</use-connection>
   </map:action>
  </map:actions>

 </map:components>

<!-- =========================== Views =================================== -->

 <map:views>
  <map:view name="content" from-label="content">
   <map:serialize type="xml"/>
  </map:view>

  <map:view name="links" from-position="last">
   <map:serialize type="links"/>
  </map:view>

 </map:views>

<!-- =========================== Resources ================================= -->

 <map:resources>
  <map:resource name="slides">
   <map:generate src="docs/samples/slides/slides.xml"/>
   <map:transform src="stylesheets/slides/slides-navigation.xsl"/>
   <map:transform src="stylesheets/slides/slides-apachecon.xsl"/>
   <map:serialize/>
  </map:resource>
 </map:resources>

<!-- ========================== Action sets ================================ -->

 <map:action-sets>
  <map:action-set name="employee">
   <map:act type="add-employee" action="Add"/>
   <map:act type="del-employee" action="Delete"/>
   <map:act type="upd-employee" action="Update"/>
  </map:action-set>
 </map:action-sets>

<!-- =========================== Pipelines ================================= -->

 <map:pipelines>
  <map:pipeline>

   <map:match pattern="">
    <map:redirect-to uri="welcome"/>
   </map:match>

   <map:match pattern="welcome">
    <map:generate src="docs/samples/samples.xml"/>
    <!--
    <map:select>
      <map:when test="wap">
        <map:transform src="stylesheets/simple-samples2html.xsl"/>
      </map:when>
      <map:when test="netscape">
        <map:transform src="stylesheets/simple-samples2html.xsl"/>
      </map:when>
      <map:otherwise>
        <map:transform src="stylesheets/simple-samples2html.xsl"/>
      </map:otherwise>
    </map:select>
    -->
    <map:transform src="stylesheets/simple-samples2html.xsl"/>
    <map:serialize/>
   </map:match>
   
   <map:match pattern="welcome-svg">
   	<map:generate src="docs/samples/samples.xml"/>
	<map:transform src="stylesheets/svg-samples2html.xsl"/>
	<map:transform type="extractor"/>
	<map:transform src="stylesheets/fragment-extractor.xsl"/>
	<map:serialize/>
   </map:match>
   
   <map:match pattern="welcome-svg-images/*.png">
   	<map:generate type="extractor" src="{1}"/>
	<map:serialize type="svg2png"/>
   </map:match>

   <!-- ================  Hello  =========================== -->

   <map:match pattern="hello.html">
    <map:generate src="docs/samples/hello-page.xml"/>
    <map:transform src="stylesheets/page/simple-page2html.xsl"/>
    <map:serialize type="html"/>
   </map:match>

   <map:match pattern="hello.wml">
    <map:generate src="docs/samples/hello-page.xml"/>
    <map:transform src="stylesheets/page/simple-page2wml.xsl"/>
    <map:serialize type="wap"/>
   </map:match>

   <map:match pattern="hello.vml">
    <map:generate src="docs/samples/hello-page.xml"/>
    <map:transform src="stylesheets/page/simple-page2vml.xsl"/>
    <map:serialize type="xml"/>
   </map:match>

   <map:match pattern="hello.svg">
    <map:generate src="docs/samples/hello-page.xml"/>
    <map:transform src="stylesheets/page/simple-page2svg.xsl"/>
    <map:serialize type="svg2jpeg"/>
   </map:match>

   <map:match pattern="hello.wrl">
    <map:generate src="docs/samples/hello-page.xml"/>
    <map:transform src="stylesheets/page/simple-page2vrml.xsl"/>
    <map:serialize type="vrml"/>
   </map:match>

   <map:match pattern="hello.pdf">
    <map:generate src="docs/samples/hello-page.xml"/>
    <map:transform src="stylesheets/page/simple-page2fo.xsl"/>
    <map:serialize type="fo2pdf"/>
   </map:match>

   <!-- ================  Sites  =========================== -->

   <map:match pattern="sites/*.apache.org">
    <map:generate src="docs/samples/sites/{1}_apache_org.xml"/>
    <map:transform src="stylesheets/sites/{1}_apache_org-html.xsl"/>
    <map:serialize/>
   </map:match>

   <map:match pattern="sites/images/*.gif">
    <map:read src="resources/images/{1}.gif" mime-type="image/gif"/>
   </map:match>

   <!-- ================  Static  =========================== -->

   <map:match pattern="fo">
    <map:generate src="docs/samples/fo/readme.fo"/>
    <map:serialize type="fo2pdf"/>
   </map:match>

   <map:match pattern="svg">
    <map:generate src="docs/samples/svg/henryV.svg"/>
    <map:serialize type="svg2png"/>
   </map:match>

   <map:match pattern="slides/slides">
    <map:redirect-to resource="slides"/>
   </map:match>

   <map:match pattern="slides/view-source/*">
    <map:read src="docs/samples/slides/{1}" mime-type="text/plain"/>
   </map:match>

   <map:match pattern="slides/view-source">
    <map:generate type="serverpages" src="docs/samples/slides/view-source.xsp"/>
    <map:serialize/>
   </map:match>

   <map:match pattern="slides/">
    <map:redirect-to resource="slides"/>
   </map:match>

   <map:match pattern="slides/style">
    <map:read src="resources/styles/slides-apachecon.css" mime-type="text/css"/>
   </map:match>

   <map:match pattern="slides/**.gif">
    <map:read src="docs/samples/{1}.gif" mime-type="image/gif"/>
   </map:match>

   <map:match pattern="slides/**.jpg">
    <map:read src="docs/samples/{1}.jpg" mime-type="image/jpg"/>
   </map:match>

   <map:match pattern="slides/**.png">
    <map:read src="docs/samples/{1}.png" mime-type="image/png"/>
   </map:match>

   <!-- =========================== Dynamic ================================ -->
   <map:match pattern="xsp/*">
    <map:generate type="serverpages" src="docs/samples/xsp/{1}.xsp"/>
    <map:transform src="stylesheets/dynamic-page2html.xsl"/>
    <map:serialize/>
   </map:match>

   <map:match pattern="xsp-plain/*">
    <map:generate type="serverpages" src="docs/samples/xsp/{1}.xsp"/>
    <map:serialize/>
   </map:match>

   <map:match pattern="sql/*">
    <map:generate src="docs/samples/sql/{1}.xml"/>
    <map:transform type="sql">
      <parameter name="use-connection" value="personnel"/>
    </map:transform>
    <map:transform src="stylesheets/simple-sql2html.xsl"/>
    <map:serialize/>
   </map:match>

   <!-- ========================== Forms ================================= -->
   <map:match pattern="forms/employee">
     <map:act set="employee"/>
     <map:generate type="serverpages" src="docs/samples/forms/employee.xsp"/>
     <map:transform src="stylesheets/dynamic-page2html.xsl"/>
     <map:serialize/>
   </map:match>

   <map:match pattern="forms/*">
     <map:generate type="serverpages" src="docs/samples/forms/{1}.xsp"/>
     <map:transform src="stylesheets/dynamic-page2html.xsl"/>
     <map:serialize/>
   </map:match>

   <!-- ========================== Session ================================= -->
   <map:match pattern="session">
    <map:redirect-to uri="session/sessionpage.xsp"/>
   </map:match>

   <map:match pattern="session/*.xsp*">
     <map:generate type="serverpages" src="docs/samples/session/{1}.xsp"/>
     <map:transform src="stylesheets/dynamic-page2html.xsl"/>
     <map:serialize/>
   </map:match>

   <!-- ========================= Server ================================ -->
   <map:match pattern="generror">
    <map:generate src="docs/samples/error-giving-page.xml"/>
    <map:transform src="stylesheets/simple-samples2html.xsl"/>
    <map:serialize/>
   </map:match>

   <map:match pattern="status">
    <map:generate type="status" src="status"/>
    <map:transform src="stylesheets/system/status2html.xsl"/>
    <map:serialize/>
   </map:match>

   <map:match pattern="sites/styles/**.css">
    <map:read src="resources/styles/{1}.css" mime-type="text/css"/>
   </map:match>

   <map:match pattern="images/**.gif">
    <map:read src="resources/images/{1}.gif" mime-type="image/gif"/>
   </map:match>

   <map:match pattern="images/**.jpg">
    <map:read src="resources/images/{1}.jpg" mime-type="image/jpg"/>
   </map:match>

   <map:match pattern="images/**.png">
    <map:read src="resources/images/{1}.png" mime-type="image/png"/>
   </map:match>

   <map:match pattern="**/">
    <map:generate type="directory" src="{1}"/>
    <map:transform src="stylesheets/system/directory2html.xsl"/>
    <map:serialize/>
   </map:match>

   <map:handle-errors>
    <map:transform src="stylesheets/system/error2html.xsl"/>
    <map:serialize status-code="500"/>
   </map:handle-errors>

  </map:pipeline>
 </map:pipelines>

</map:sitemap>

<!-- end of file -->
