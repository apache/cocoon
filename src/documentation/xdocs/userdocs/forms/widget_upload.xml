<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 1999-2004 The Apache Software Foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.0//EN" "document-v10.dtd">

<document>
  <header>
    <title>Cocoon Forms: upload widget</title>
    <authors>
      <person name="The Apache Cocoon Team" email="dev@cocoon.apache.org"/>
    </authors>
  </header>
  <body>
    <s1 title="Concept">
      <p>This widget allows to upload files by using Cocoon's file upload features.
      For this reason, this widget won't function properly unless <code>enable-uploads</code>
      is set to <code>true</code> in <code>WEB-INF/web.xml</code>.</p>

      <p>Also, don't forget to put the <strong>enctype</strong> attribute as
      <code>multipart/form-data</code> in the <strong>ft:form-template</strong>
      element, inside the template file.</p>

      <p>To retrieve the uploaded data, simply use the <code>getValue</code>
      method of the widget, which will in this case return an object of the
      following type:</p>

      <source>org.apache.cocoon.servlet.multipart.Part</source>

      <p>The <code>setValue</code> method cannot be used with the upload widget.</p>

      <p>The uploaded data will be automatically cleaned up when the upload
      widget instance object is finialized by the JVM.</p>
    </s1>

    <s1 title="Configuration">
      <source><![CDATA[<fd:upload id="..." mime-types="text/plain, text/xml" required="true|false">
  <fd:label>...</fd:label>
  <fd:help>...</fd:help>
  <fd:hint>...</fd:hint>
</fd:upload>]]></source>

      <p>The optional <code>mime-types</code> attribute allows to specify a
      comma-separated list of mime-types which are accepted. The widget will
      be invalid if the uploaded type isn't of one of the specified content types.</p>
    </s1>
  </body>
</document>
