<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.0//EN" "../../../WEB-INF/entities/document-v10.dtd">

<document>
  <header>
    <title>Advanced Control Flow</title>
    <authors>
      <person name="Ovidiu Predescu" email="ovidiu@apache.org"/>
      <person name="Christopher Oliver" email="coliver@apache.org"/>
    </authors>
  </header>

  <body>
    <s1 title="Sitemap">
    <p>The Cocoon sitemap includes several elements to specify interactions with your Flowscripts</p>
      <s2 title="flow">
     <p>The <code>flow</code> element defines a Flowscript interpreter for a sitemap. The <code>language</code> attribute specifies the target programming language. Currently the only supported language is <code>"JavaScript"</code>. Its embedded <code>script</code> elements allow you to specify the files that make up the flow for this sitemap. Each <code>script</code> element specifies the URI of a script that will be compiled and executed when this Sitemap is created. The <code>src</code> attribute specifies the URI of the script.</p><p>
      <source><![CDATA[
        <map:flow language="Language">
           <map:script src="URI"/>+
        </map:flow>
      ]]></source>
    </p>
      </s2>
      <s2 title="call">
     <p>The <code>call</code> element allows you to call a top-level function in your Flowscript or to invoke an existing continuation.</p>
      <p>If the <code>function</code> attribute is present, then the Sitemap will invoke a top-level function defined in your Flowscript. The <code>function</code> attribute specifies the name of the function. Zero or more nested <code>parameter</code> elements may be provided to pass arguments to the function.</p>
      <p>
      <source><![CDATA[
        <map:call function="FunctionName">
           <map:parameter name="Name" value="Value"/>*
        </map:call>
      ]]></source>
      </p>
      <p>If the <code>continuation</code> attribute is present, then the Sitemap will invoke an existing continuation of your Flowscript. The <code>continuation</code> attribute specifies the unique id of the continuation.</p>
      <p>
      <source><![CDATA[
        <map:call continuation="Id"/>
      ]]></source>
      </p>
      </s2>
    </s1>

  </body>
</document>
