<?xml version="1.0"?>
<!-- Example to bind form2 form to Form2Bean -->
<wb:context 
  xmlns:wb="http://apache.org/cocoon/woody/binding/1.0" 
  path="/" >

  	<!-- the email value will not be saved because of the @readonly -->
    <wb:field id="email"   path="email"         readonly="true"/>
		<!-- jxpath binds to nodes as well as to attributes -->
    <!--
    <wb:field id="account" path="account/@size" />
    <wb:field id="number1" path="number"        />
    -->

	  <!-- one entry field in the client maps through aggregate fields -->
    <wb:aggregate id="phone" path="." >
    	<!-- to multiple fields in the XML file -->
      <wb:field id="number" path="phoneNumber"/>
      <wb:field id="zone"   path="phoneZone"/>
      <wb:field id="cntr"   path="phoneCountry"/>
    </wb:aggregate>
    
  
    <wb:field id="ipaddress" path="ipAddress"/>


  <!-- repeater requires unique identification mechanism of the row-nodes -->
  <wb:repeater id="contacts"
    parent-path="."
    row-path="contacts"
    unique-row-id="id"
    unique-path="@id"
    >
    <!-- important note: the row-path is used inside jxpath-createPath context,
         as a consequence it cannot have dependent children or predicates -->

    <wb:on-bind>
    	<!-- executed on updates AND right after the insert -->
      <wb:field id="firstname" path="firstName" />
      <wb:field id="lastname"  path="lastName"  />
      <wb:field id="phone"     path="phone" />
      <wb:field id="email"     path="email"     />
    </wb:on-bind>

    <wb:on-delete-row>
    	<!-- chose on of these to test -->
    	<!--
      <wb:set-attribute name="row-state" value="deleted" />
      -->
      <wb:delete-node />
    </wb:on-delete-row>

    <wb:on-insert-row>
      <wb:insert-bean
        classname="org.apache.cocoon.woody.samples.Contact"
        addmethod="addContact" />
    </wb:on-insert-row>
  </wb:repeater>

</wb:context>
