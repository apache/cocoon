<?xml version="1.0" encoding="ISO-8859-1"?>
<wd:form
  xmlns:wd="http://apache.org/cocoon/woody/definition/1.0"
  xmlns:i18n="http://apache.org/cocoon/i18n/2.1">

  <wd:field id="email" required="true">
    <wd:datatype base="string">
      <wd:validation>
        <wd:email/>
      </wd:validation>
    </wd:datatype>
    <wd:label>Enter an <b>email</b> address:</wd:label>
  </wd:field>

  <wd:booleanfield id="somebool">
    <wd:label>Put me <em>on</em> or <em>off</em>.</wd:label>
  </wd:booleanfield>

  <wd:field id="account">
    <wd:label>Indicate the size of your bank account (in m<sup>3</sup>):</wd:label>
    <wd:datatype base="string">
      <wd:selection-list>
        <wd:item value="1"/>
        <wd:item value="2"/>
        <wd:item value="3">
          <wd:label>three</wd:label>
        </wd:item>
        <wd:item value="4"/>
        <wd:item value="5"/>
      </wd:selection-list>
    </wd:datatype>
  </wd:field>

  <wd:field id="number1" required="true">
    <wd:label>Please enter a number:</wd:label>
    <wd:datatype base="long"/>
  </wd:field>

  <wd:multivaluefield id="drinks">
    <wd:label>Indicate which 2 of the following drinks you'd like to receive:</wd:label>
    <wd:datatype base="string">
      <wd:selection-list>
        <wd:item value="Maes"/>
        <wd:item value="Jupiler"/>
        <wd:item value="Leffe"/>
        <wd:item value="Hoegaarden"/>
        <wd:item value="Coca Cola"/>
      </wd:selection-list>
      <wd:validation>
        <wd:value-count exact="2"/>
      </wd:validation>
    </wd:datatype>
  </wd:multivaluefield>

  <wd:aggregatefield id="phone" required="true">
    <wd:label>Enter a phone number in \+([0-9]{1,3})-([0-9]{1,4})-([0-9]{5,7}) format</wd:label>
    <wd:split pattern="\+([0-9]{1,3})-([0-9]{1,4})-([0-9]{5,7})">
      <wd:map group="1" field="cntr"/>
      <wd:map group="2" field="zone"/>
      <wd:map group="3" field="number"/>
      <wd:failmessage>The phone-number format is wrong, please try again
      </wd:failmessage>
    </wd:split>
    <wd:combine expression='Concat("+", cntr, "-", zone, "-", number)'/>
    <wd:children>
      <wd:field id="cntr">
        <wd:datatype base="string"/>
      </wd:field>
      <wd:field id="zone">
        <wd:datatype base="string"/>
      </wd:field>
      <wd:field id="number">
        <wd:datatype base="string"/>
      </wd:field>
    </wd:children>
    <wd:validation>
    </wd:validation>
  </wd:aggregatefield>

  <wd:field id="ipaddress" required="true">
    <wd:label>Please enter your IP address</wd:label>
    <wd:datatype base="string">
      <wd:validation>
        <wd:regexp pattern="^([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])$">
          <wd:failmessage>Invalid IP address.</wd:failmessage>
        </wd:regexp>
      </wd:validation>
    </wd:datatype>
  </wd:field>

  <wd:repeater id="contacts">
    <wd:field id="id">
      <wd:datatype base="string"/>
    </wd:field>
    <wd:field id="firstname">
      <wd:label>Firstname</wd:label>
      <wd:datatype base="string"/>
    </wd:field>
    <wd:field id="lastname">
      <wd:label>Lastname</wd:label>
      <wd:datatype base="string"/>
    </wd:field>
    <wd:field id="phone">
      <wd:label>Phone</wd:label>
      <wd:datatype base="string"/>
    </wd:field>
    <wd:field id="email">
      <wd:label>Email</wd:label>
      <wd:datatype base="string">
        <wd:validation>
          <wd:email/>
        </wd:validation>
      </wd:datatype>
    </wd:field>
    <wd:booleanfield id="select">
      <wd:label>Select</wd:label>
    </wd:booleanfield>
  </wd:repeater>

  <wd:button id="addcontact" action-command="add-contact">
    <wd:label>Add contact</wd:label>
  </wd:button>

  <wd:button id="removecontacts" action-command="remove-selected-contacts">
    <wd:label>Remove selected contacts</wd:label>
  </wd:button>

</wd:form>
