<?xml version="1.0"?>

<!--
    sitemap for SWF samples setup contributed by joerg.heinicke@gmx.de
    $Id: sitemap.xmap,v 1.2 2003/05/05 23:46:46 vgritsenko Exp $
-->

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
    <map:components>
        <map:generators default="file"/>
        <map:transformers default="xslt"/>
        <map:serializers default="html">
            <map:serializer name="swf" src="org.apache.cocoon.serialization.SWFSerializer" mime-type="application/x-shockwave-flash"/>
        </map:serializers>
        <map:readers default="resource"/>
        <map:matchers default="wildcard"/>
        <map:pipes default="caching"/>
    </map:components>

    <!-- =========================== Views =================================== -->

    <map:views>
        <map:view from-label="content" name="content">
            <map:serialize type="xml"/>
        </map:view>
        <map:view from-label="xmlswf" name="xmlswf">
            <map:serialize type="xml"/>
        </map:view>
        <map:view from-position="last" name="links">
            <map:serialize type="links"/>
        </map:view>
    </map:views>

    <!-- =========================== Pipelines ================================= -->

    <map:pipelines>
        <map:pipeline type="caching">

            <map:match pattern="">
                <map:redirect-to uri="welcome"/>
            </map:match>

            <map:match pattern="welcome">
                <map:generate src="samples.xml"/>
                <map:transform src="context://samples/common/style/xsl/html/simple-samples2html.xsl">
                    <map:parameter name="contextPath" value="{request:contextPath}"/>
                </map:transform>
                <map:serialize/>
            </map:match>

            <!-- ========================= swf ================================ -->

            <map:match pattern="hello.swf">
                <map:generate src="context://samples/hello-world/content/hello.xml"/>
                <map:transform label="xmlswf" src="context://samples/hello-world/style/xsl/page2swf.xsl"/>
                <map:serialize type="swf"/>
            </map:match>

        </map:pipeline>
    </map:pipelines>
</map:sitemap>

