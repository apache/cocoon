<?xml version="1.0"?>
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

 <map:components>

  <map:generators default="file">   
    <map:generator name="woody" src="org.apache.cocoon.woody.generation.WoodyGenerator" logger="woody"/>
    <map:generator name="jx" src="org.apache.cocoon.generation.JXTemplateGenerator" label="content,data" logger="sitemap.generator.jx"/>
  </map:generators>

  <map:transformers default="xalan">    
    <map:transformer name="woody" src="org.apache.cocoon.woody.transformation.WoodyTemplateTransformer" logger="woody"/>
    <map:transformer name="i18n" src="org.apache.cocoon.transformation.I18nTransformer">
      <catalogues default="other">
        <catalogue id="other" name="OtherMessages" location="context://samples/woody/messages"/>
        <catalogue id="woody" name="WoodyMessages" location="context://samples/woody/messages"/>
      </catalogues>
      <cache-at-startup>true</cache-at-startup>
    </map:transformer>
  </map:transformers>

  <map:selectors default="browser">
    <map:selector name="request-method" src="org.apache.cocoon.selection.RequestMethodSelector"/>
  </map:selectors>

  <map:actions/>

  <map:pipes default="caching">
  </map:pipes>

 </map:components>

 <map:views>
  <map:view name="content" from-label="content">
   <map:serialize type="xml"/>
  </map:view>

  <map:view name="pretty-content" from-label="data">
   <map:transform src="context://stylesheets/system/xml2html.xslt"/>
   <map:serialize type="html"/>
  </map:view>

  <map:view name="links" from-position="last">
   <map:serialize type="links"/>
  </map:view>
 </map:views>

  <map:flow language="apples" />

 <map:pipelines>
   <map:pipeline>

     <map:match pattern="">
      <map:generate src="welcome.xml"/>
      <map:transform src="context://samples/common/style/xsl/html/simple-samples2html.xsl">
         <map:parameter name="contextPath" value="{request:contextPath}"/>
      </map:transform>
      <map:serialize/>
     </map:match>

     <!--
        | Binding form sample, stolen from woody
        -->
     
      <map:match pattern="*.continue">
        <map:call continuation="{1}"/>
      </map:match>

      <map:match pattern="form2xml.flow">
        <map:call function="org.apache.cocoon.components.flow.apples.samples.BindingWoodyApple">
          <map:parameter name="form-src" value="context://samples/woody/forms/form2_model.xml"/>
          <map:parameter name="binding-src" value="context://samples/woody/forms/form2_bind_xml.xml"/>
          <map:parameter name="formhandler" value="org.apache.cocoon.woody.samples.Form1Handler"/>
          <map:parameter name="documentURI" value="context://samples/woody/forms/form2_data.xml"/>
          <map:parameter name="form-pipe" value="cocoon://samples/woody/form2-display-pipeline"/>
          <map:parameter name="valid-pipe" value="cocoon://samples/woody/form2-success-pipeline"/>
        </map:call>
      </map:match>

   </map:pipeline>
 </map:pipelines>

</map:sitemap>
