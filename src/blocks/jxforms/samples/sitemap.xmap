<?xml version="1.0"?>
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

  <!-- =========================== Components ================================ -->
  <map:components> 
    <map:generators default="file">
      <map:generator name="jxforms" src="org.apache.cocoon.generation.JXFormsGenerator" logger="jxforms.sitemap.generator"/>
    </map:generators>
    <map:serializers default="html"/>
    <map:matchers default="wildcard"/>
  </map:components>


<!-- =========================== Views =================================== -->

<!--
  The debug view can be used to output an intermediate 
  snapshot of the pipeline.
  Pass cocoon-view=debug as a URL parameter to see
  the pipeline output produced by the transofrmer
  labeled "debug". You can move the label to different
  transformers to understand each processing
  stage better.
-->
<map:views>
  <map:view name="debug" from-label="debug">
    <map:serialize type="xml"/>
  </map:view>
  <map:view name="xml" from-label="xml">
    <map:serialize type="xml"/>
  </map:view>
</map:views>

  <!-- =========================== Resources ================================= -->

  <map:resources>
  </map:resources>

  <!-- =========================== Pipelines ================================= -->
  <map:flow language="javascript">
     <map:script src="calc/calc.js"/>
     <map:script src="wizard/feedbackWizard.js"/>
  </map:flow>


  <map:pipelines> 
  
    <map:pipeline>

      <map:match pattern="">
        <map:redirect-to uri="welcome"/>
      </map:match>

      <map:match pattern="welcome">
        <map:generate src="samples.xml"/>
        <map:transform src="context://samples/common/style/xsl/html/simple-samples2html.xsl">
          <map:parameter name="contextPath" value="{request:contextPath}"/>
        </map:transform>
        <map:serialize/>
      </map:match>

      <map:match pattern="wizard/">
        <map:call function="jxform">
          <map:parameter name="function" value="feedbackWizard"/>
	  <map:parameter name="id" value="form-feedback"/>
          <map:parameter name="validatorNamespace" value="http://www.ascc.net/xml/schematron"/>
          <map:parameter name="validatorSchema" value="wizard/schematron.xml"/>

        </map:call>
      </map:match>

      <map:match pattern="wizard/*.xml">
	      <!-- original XMLForm document -->
	      <map:generate type="jxforms" src="wizard/{1}.xml"/>
	
	      <!-- Personalize the look and feel of the form controls  -->
	      <!--map:transform type="xalan" src="stylesheets/wizard2html.xsl" /-->

          <map:transform src="context://samples/common/style/xsl/html/complex-page2html.xsl">
            <map:parameter name="contextPath" value="{request:contextPath}"/>
          </map:transform>

	      <!-- Transform the JXForms controls to HTML controls -->

	      <map:transform type="xalan" src="stylesheets/jxforms-default.xsl" />
	
	      <map:transform type="xalan" src="stylesheets/jxforms2html.xsl" />
	      
	      <!-- sending the HTML back to the browser -->
	      <map:serialize type="html" label="debug"/>
	</map:match>	      

      <map:match pattern="calc/">
        <map:call function="jxform">
          <map:parameter name="function" value="calculator"/>
	  <map:parameter name="id" value="calc"/>
        </map:call>
      </map:match>

      <map:match pattern="calc/*.xml">
          <!-- original XMLForm document -->
          <map:generate type="jxforms" src="calc/{1}.xml"/>

          <!-- personalizing the look and feel of the form controls  -->
          <map:transform src="context://samples/common/style/xsl/html/complex-page2html.xsl">
            <map:parameter name="contextPath" value="{request:contextPath}"/>
          </map:transform>

          <!-- Transforming the XMLForm controls to HTML controls -->
          <map:transform src="stylesheets/jxforms2html.xsl" />

          <!-- sending the HTML back to the browser -->
          <map:serialize type="html" label="debug"/>

      </map:match>

    </map:pipeline>

  </map:pipelines> 
  
</map:sitemap>
<!-- end of file -->








