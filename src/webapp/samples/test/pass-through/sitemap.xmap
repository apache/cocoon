<?xml version="1.0"?>

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
  <map:pipelines>    	
    <map:pipeline>
      <map:mount check-reload="true" uri-prefix=""
                 src="elsewhere/sitemap.xmap" pass-through="true"/>
    
    	  <map:match pattern="sub/**">
    	  	<map:mount src="sub/" uri-prefix="sub"/>
    	  </map:match>

      <map:match pattern="welcome">
        <map:generate src="welcome.xml"/>
        <map:serialize/>
      </map:match>

      <map:match pattern="welcome1">
        <map:generate src="cocoon:/welcome"/>
        <map:serialize/>
      </map:match>

      <map:match pattern="welcome2">
        <map:generate src="cocoon:/welcome1"/>
        <map:serialize/>
      </map:match>

      <map:match pattern="welcome3">
        <map:generate src="cocoon:/welcome2"/>
        <map:serialize/>
      </map:match>
    	
    	  <map:match pattern="hellosub">
    	  	<!-- This pattern deliberately produces and error, as it is meant to trap
    	  	     wrong active processor in the handling of sub/sub1 -->
    	  	<map:serialize/>
    	  </map:match>
    	
    	  <map:match pattern="subsub1">
    	  	<map:generate src="cocoon:/sub/sub1"/>
    	  	<map:serialize/>
    	  </map:match>
    	
    	  <map:match pattern="aggregate">
    	    <map:aggregate element="root">
    	      <map:part src="cocoon:/welcome3"/>
    	      <map:part src="cocoon:/welcome3"/>
    	      <map:part src="cocoon:/subsub1"/>
    	    </map:aggregate>
    	  	<map:serialize/>
    	  </map:match>

    </map:pipeline>
  </map:pipelines>
</map:sitemap>
