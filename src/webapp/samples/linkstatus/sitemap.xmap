<?xml version="1.0"?>

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<!-- =========================== Components ================================ -->

 <map:components>
  <map:generators default="file">
   <map:generator name="linkstatus"      logger="sitemap.generator.linkstatus"      label="content,data"
                  src="org.apache.cocoon.generation.LinkStatusGenerator"/>
  </map:generators>

  <map:transformers default="xslt"/>
  <map:readers default="resource"/>
  <map:serializers default="html"/>
  <map:matchers default="wildcard"/>
  <map:selectors default="browser"/>
 </map:components>

 <map:views>
  <map:view name="links" from-position="last">
   <map:serialize type="links"/>
  </map:view>
 </map:views>

<!-- =========================== Pipelines ================================= -->

 <map:pipelines>
  <map:pipeline>
 
   <map:match pattern="">
    <map:redirect-to uri="welcome"/>
   </map:match>

   <map:match pattern="welcome">
    <map:generate src="samples.xml"/>
    <map:transform src="context://samples/common/style/xsl/html/simple-samples2html.xsl">
       <map:parameter name="contextPath" value="{request:contextPath}"/>
    </map:transform>
    <map:serialize/>
   </map:match>

   <map:match pattern="linkstatus">
     <map:redirect-to uri="linkstatus/http/localhost/8080/cocoon/documents/index.html"/>
   </map:match>

   <map:match pattern="linkstatus/*/*/*/**">
     <map:generate type="linkstatus" src="{1}://{2}:{3}/{4}"/>
     <map:transform src="linkstatus.xsl"/>
     <map:serialize/>
   </map:match>

   <map:match pattern="linkalarm">
     <!-- Get the current linkalarm broken list and wrap it in a <body>
       This report is tab-delimited with the following fields:
       broken-url,referer-url,response-code,text-reason
     -->
     <map:generate src="http://reports.linkalarm.com/373104199608/links.broken.txt" type="html"/>
     <!-- clean out any <a> tags -->
     <map:transform src="linkalarm-1.xsl"/>
     <!-- split it into tokens based on whitespace -->
     <map:transform src="linkalarm-2.xsl"/>
     <!-- structure it into items -->
     <map:transform src="linkalarm-3.xsl"/>
     <!-- produce the html page -->
     <map:transform src="linkalarm2html.xsl"/>
     <map:serialize type="html"/>
   </map:match>

   <!-- ========================= Resources ================================ -->

   <map:match pattern="images/**.gif">
    <map:read src="context://samples/resources/images/{1}.gif" mime-type="image/gif"/>
   </map:match>

  </map:pipeline>
 </map:pipelines>

</map:sitemap>

<!-- end of file -->
