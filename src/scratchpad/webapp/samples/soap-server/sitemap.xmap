<?xml version="1.0"?>

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<!-- =========================== Components ================================ -->

<map:components>

<map:generators default="file"/>
<map:transformers default="xslt"/>

<map:readers default="resource">

  <!-- Defines a SOAP RPC reader that will serve SOAP requests via HTTP-POST. -->
  <map:reader logger="sitemap.reader.soap-rpc" name="soap-rpc"
              src="org.apache.cocoon.reading.AxisRPCReader"/>

</map:readers>

<map:serializers default="html"/>
<map:matchers default="wildcard"/>
<map:selectors default="browser"/>
<map:actions/>


</map:components>

<!-- =========================== Pipelines ================================= -->

<map:pipelines>
  
  <!-- sub-sitemap soap example pipeline -->
  <map:pipeline>

    <!-- Match SOAP RPC Router requests -->
    <map:match pattern="rpcrouter">
      <map:read type="soap-rpc" mime-type="text/xml"/>
    </map:match>

    <!-- Send all non qualified requests to the status page -->
    <map:match pattern="">
      <map:redirect-to uri="status.xsp"/>
    </map:match>

    <map:match pattern="status.xsp">
      <map:generate type="serverpages" src="status.xsp"/>
      <map:transform src="status.xsl"/>
      <map:serialize type="html"/>
    </map:match>

    <!-- Match any other xsp pages we've put in the directory -->
    <map:match pattern="*.xsp">
      <map:generate type="serverpages" src="{1}.xsp"/>
      <map:serialize type="xml"/>
    </map:match>

  </map:pipeline>
</map:pipelines>

</map:sitemap>

<!-- end of file -->

