<?xml version="1.0" encoding="UTF-8"?>

<!-- CVS $Id: sitemap.xmap,v 1.4 2003/07/29 03:15:48 vgritsenko Exp $ -->

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<!-- =========================== Views =================================== -->

 <map:views>
 
  <map:view name="content" from-label="content">
   <map:serialize type="xml"/>
  </map:view>

  <map:view from-label="content" name="pretty-content">
    <map:transform src="context://stylesheets/system/xml2html.xslt"/>
    <map:serialize type="html"/>
  </map:view>

  <map:view name="links" from-position="last">
   <map:serialize type="links"/>
  </map:view>
  
 </map:views>

<!-- =========================== Pipelines ================================= -->

 <map:pipelines>

  <map:pipeline>

   <map:match pattern="order">
     <map:generate src="OrderPage.xml"/>
     <map:transform src="context://samples/stylesheets/dynamic-page2html.xsl">
        <map:parameter name="servletPath" value="{request:servletPath}"/>
        <map:parameter name="sitemapURI" value="{request:sitemapURI}"/>
        <map:parameter name="contextPath" value="{request:contextPath}"/>
        <map:parameter name="remove" value="order"/>
        <map:parameter name="file" value="OrderPage.xml"/>
     </map:transform>
     <map:serialize type="html"/>
   </map:match>

   <map:match pattern="process-order">
     <map:generate type="stream">
       <map:parameter name="form-name" value="Foo"/>
     </map:generate>
     <map:transform src="context://stylesheets/system/xml2html.xslt"/>
     <map:serialize type="html"/>
   </map:match>

  </map:pipeline>
  
 </map:pipelines>

</map:sitemap>
