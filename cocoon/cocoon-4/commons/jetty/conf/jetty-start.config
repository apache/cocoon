# This file controls what file are to be put on classpath or command line.
#
# Format is as follows:
# Each line contains entry for one JAR file.
# Format of line:
#
#  SUBJECT [ [!] CONDITION [AND|OR] ]*
# 
# where SUBJECT: 
#   ends with ".class" is the Main class to run.
#   ends with ".xml" is a configuration file for the command line
#   ends with "/" is a directory from which add all jar and zip files from. 
#   ends with "/*" is a directory from which add all unconsidered jar and zip files from.
#   Containing = are used to assign system properties.
#   all other subjects are treated as files to be added to the classpath.
#
# Subjects may include system properties with $(propertyname) syntax. 
#
# Files starting with "/" are considered absolute, all others are relative to
# the home directory.
#
# CONDITION is one of:
#   always
#   never
#   available classname        # true if class on classpath
#   property name              # true of set
#   java OPERATOR version      # java version compared to literal
#   nargs OPERATOR number      # number of command line args compared to literal
#   OPERATOR := one of "<",">","<=",">=","==","!="
#
# CONTITIONS can be combined with AND OR or !, with AND being the assume
# operator for a list of CONDITIONS.
# Classpath operations are evaluated on the fly, so once a class or jar is
# added to the classpath, subsequent available conditions will see that class.
#

$(jetty.class.path)                              always

org.mortbay.log.LogFactory.noDiscovery=true       ! property org.mortbay.log.LogFactory.noDiscovery
javax.management.builder.initial=mx4j.server.MX4JMBeanServerBuilder java > 1.4

# Try different settings of jetty.home until the jetty.jar is found.
jetty.home=./tools/jetty                                     ! exists $(jetty.home)/lib/jetty-5.1.8.jar 
jetty.home=../tools/jetty                                    ! exists $(jetty.home)/lib/jetty-5.1.8.jar

# The main class to run
org.mortbay.jetty.Server.class
# override class with old property name
$(start.class).class
# override class with preferred property name
$(main.class).class
$(loader.main.class).class

# The default configuration files
$(jetty.home)/conf/main.xml                    nargs == 0

# Set the jetty classpath
$(jetty.home)/lib/*
$(home)/lib/endorsed/*                           always
$(home)/lib/core/commons-logging-1.0.4.jar       always
$(home)/lib/core/avalon-logkit-2.1.jar           always

# Add JMX jars
$(home)/lib/core/jetty-jmx-5.1.8.jar            java >= 1.4


